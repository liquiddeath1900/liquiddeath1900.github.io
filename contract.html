<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B68C3RNBVD"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-B68C3RNBVD');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SeamlessFlow Contract Generator</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f9fafb; }
        .container { max-width: 1200px; margin: 0 auto; padding: 24px; }
        .card { background: white; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); padding: 24px; margin-bottom: 24px; }
        h1 { color: #2563eb; font-size: 32px; margin-bottom: 8px; }
        h2 { color: #1f2937; font-size: 24px; margin-bottom: 16px; }
        h3 { color: #2563eb; font-size: 18px; margin-bottom: 12px; }
        .header-info { color: #6b7280; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; }
        input, select, textarea { width: 100%; padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #2563eb; }
        textarea { resize: vertical; font-family: inherit; }
        .service-option { display: flex; align-items: center; padding: 12px; border: 1px solid #d1d5db; border-radius: 6px; margin-bottom: 8px; cursor: pointer; transition: background 0.2s; }
        .service-option:hover { background: #f9fafb; }
        .service-option input[type="checkbox"] { width: 20px; height: 20px; margin-right: 12px; cursor: pointer; }
        .service-option .flex-1 { flex: 1; }
        .service-option .price { font-weight: 600; color: #2563eb; }
        .price.one-time { color: #059669; }
        .custom-price-input { margin-left: 32px; margin-top: 8px; max-width: 250px; }
        .pricing-summary { background: #dbeafe; border: 2px solid #93c5fd; }
        .pricing-row { display: flex; justify-content: space-between; font-size: 18px; font-weight: 600; margin-bottom: 8px; }
        .pricing-total { font-size: 20px; border-top: 2px solid: #60a5fa; padding-top: 12px; margin-top: 12px; color: #1d4ed8; }
        .btn-pdf {
            width: 100%;
            padding: 16px 24px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            background: #dc2626;
            color: white;
            transition: all 0.2s;
            margin-bottom: 24px;
        }
        .btn-pdf:hover { background: #b91c1c; }
        .hidden { display: none; }
        .logo { max-width: 300px; height: auto; }
        .header-flex { display: flex; align-items: center; gap: 24px; }
        .header-text { flex: 1; }

        /* Print styles */
        @media print {
            @page {
                margin: 0.5in;
                size: letter;
            }
            html {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            body {
                background: white;
                margin: 0;
                padding: 0;
            }
            .no-print { display: none !important; }
            .print-only { display: block !important; }
            .contract-document {
                font-size: 11pt;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
                color: #374151;
                line-height: 1.4;
                max-width: 100%;
            }
            .contract-document .section {
                margin-bottom: 14px;
                padding-bottom: 0;
            }
            .contract-document h2 {
                margin-top: 18px;
                margin-bottom: 8px;
            }
            .contract-document h3 {
                margin-top: 12px;
                margin-bottom: 4px;
            }
            .page-break { page-break-before: always; }
            .signature-section { page-break-before: always; }
            .avoid-break { page-break-inside: avoid; }
        }

        /* Contract Document Styles */
        .contract-document {
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
            color: #374151;
        }
        .contract-document .logo-header {
            text-align: center;
            margin-bottom: 24px;
        }
        .contract-document .logo-header img {
            max-width: 250px;
            height: auto;
        }
        .contract-document h1 {
            text-align: center;
            font-size: 20pt;
            color: #1F2937;
            margin-bottom: 8px;
            font-weight: 700;
        }
        .contract-document h2 {
            font-size: 14pt;
            color: #1F2937;
            font-weight: 700;
            border-bottom: 1px solid #E5E7EB;
            padding-bottom: 6px;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        .contract-document h3 {
            font-size: 12pt;
            color: #1F2937;
            font-weight: 600;
            margin-top: 14px;
            margin-bottom: 6px;
        }
        .contract-document p {
            margin-bottom: 8px;
            text-align: left;
            line-height: 1.4;
        }
        .contract-document ul {
            margin-left: 24px;
            margin-top: 6px;
            margin-bottom: 8px;
        }
        .contract-document li {
            margin-bottom: 4px;
            line-height: 1.4;
        }
        .contract-document .section {
            margin-bottom: 16px;
            padding-bottom: 0;
            page-break-inside: auto;
        }
        .contract-document .section + .section {
            margin-top: 0;
        }
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }
        .signature-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            margin-top: 48px;
        }
        .signature-block {
            margin-bottom: 16px;
        }
        .signature-line {
            border-bottom: 1px solid #000;
            padding-bottom: 24px;
            margin-bottom: 6px;
            margin-top: 24px;
        }
        .footer-text {
            text-align: center;
            color: #6B7280;
            font-size: 10pt;
            margin-top: 32px;
            padding-top: 16px;
            border-top: 1px solid #E5E7EB;
        }
    </style>
</head>
<body>
    <div class="container no-print">
        <!-- Header -->
        <div class="card">
            <div style="text-align: center;">
                <img src="assets/website homelogo.png" alt="SeamlessFlow.ai Logo" class="logo">
                <p class="header-info" style="margin-top: 12px;">Contract Generator</p>
            </div>
        </div>

        <!-- Client Information -->
        <div class="card">
            <h2>Client Information</h2>
            <div class="grid">
                <input type="text" id="companyName" placeholder="Company Name *">
                <input type="text" id="contactName" placeholder="Contact Name *">
                <input type="text" id="title" placeholder="Title *">
                <input type="email" id="email" placeholder="Email *">
                <input type="tel" id="phone" placeholder="Phone *">
                <input type="text" id="address" placeholder="Address">
                <input type="text" id="city" placeholder="City">
                <input type="text" id="state" placeholder="State">
                <input type="text" id="zip" placeholder="ZIP Code">
                <select id="industry">
                    <option value="">Select Industry *</option>
                    <option value="HVAC">HVAC</option>
                    <option value="Plumbing">Plumbing</option>
                    <option value="Roofing">Roofing</option>
                    <option value="Electrical">Electrical</option>
                    <option value="Remodeling">Remodeling/General Contractor</option>
                    <option value="Cleaning">Cleaning Services</option>
                    <option value="Auto Detailing">Auto Detailing</option>
                    <option value="Pet Grooming">Pet Grooming</option>
                    <option value="Other">Other</option>
                </select>
                <input type="text" id="industryOther" placeholder="Specify Industry" class="hidden">
            </div>
        </div>

        <!-- Service Selection -->
        <div class="card">
            <h2>Service Selection</h2>

            <h3>Local SEO Services</h3>
            <p style="color: #6b7280; font-size: 14px; margin-bottom: 12px;">Select ONE SEO tier (mutually exclusive)</p>
            <div class="service-option">
                <input type="checkbox" id="seoStarter" data-group="seo">
                <span class="flex-1">SEO Starter - Local visibility foundation</span>
                <span class="price">$497/month</span>
            </div>
            <div class="service-option">
                <input type="checkbox" id="seoMarketLeader" data-group="seo">
                <span class="flex-1">Market Leader - Competitive dominance</span>
                <span class="price">$997/month</span>
            </div>
            <div class="service-option">
                <input type="checkbox" id="seoCityDomination" data-group="seo">
                <span class="flex-1">City Domination - Full market control</span>
                <span class="price">$1,497/month</span>
            </div>
            <div class="service-option">
                <input type="checkbox" id="seoRegional" data-group="seo">
                <span class="flex-1">Regional Domination - Multi-city expansion</span>
                <span class="price">$3,500/month</span>
            </div>

            <h3 style="margin-top: 24px;">Web Design & Automation</h3>
            <p style="color: #6b7280; font-size: 14px; margin-bottom: 12px;">Select any combination</p>
            <div class="service-option">
                <input type="checkbox" id="websiteDev">
                <span class="flex-1">Professional Website Development</span>
                <span class="price one-time">$2,500 one-time</span>
            </div>
            <input type="number" id="websiteDevPrice" placeholder="Adjust price if needed" class="custom-price-input hidden" value="2500">
            <div class="service-option">
                <input type="checkbox" id="marketingAutomation">
                <span class="flex-1">Marketing Automation Platform</span>
                <span class="price">$1,500/month</span>
            </div>
            <div class="service-option">
                <input type="checkbox" id="businessAutomation">
                <span class="flex-1">Business Operations Automation</span>
                <span class="price">Custom Pricing</span>
            </div>
            <input type="number" id="businessAutomationPrice" placeholder="Enter monthly price" class="custom-price-input hidden">

            <h3 style="margin-top: 24px;">Advanced Automation Packages</h3>
            <p style="color: #6b7280; font-size: 14px; margin-bottom: 12px;">Select ONE package (mutually exclusive)</p>
            <div class="service-option">
                <input type="checkbox" id="foundationPackage" data-group="automation">
                <span class="flex-1">Foundation Package - Essential automation suite</span>
                <span class="price">$1,500/mo + setup</span>
            </div>
            <input type="number" id="foundationSetupFee" placeholder="Setup fee (default $4,500)" class="custom-price-input hidden" value="4500">
            <div class="service-option">
                <input type="checkbox" id="growthPackage" data-group="automation">
                <span class="flex-1">Growth Package - Advanced automation & AI</span>
                <span class="price">$3,000/mo + setup</span>
            </div>
            <input type="number" id="growthSetupFee" placeholder="Setup fee (default $7,500)" class="custom-price-input hidden" value="7500">
            <div class="service-option">
                <input type="checkbox" id="enterprisePackage" data-group="automation">
                <span class="flex-1">Enterprise Package - Full automation transformation</span>
                <span class="price">Custom monthly + $15,000 setup</span>
            </div>
            <div id="enterprisePricing" class="hidden" style="margin-left: 32px; margin-top: 8px;">
                <input type="number" id="enterpriseMonthlyFee" placeholder="Enter monthly fee" style="margin-bottom: 8px;" value="6000">
                <input type="number" id="enterpriseSetupFee" placeholder="Setup fee (default $15,000)" value="15000">
            </div>
        </div>

        <!-- Territory (conditional) -->
        <div class="card hidden" id="territorySection">
            <h2>Territory Information</h2>
            <p style="color: #6b7280; margin-bottom: 16px;">Define your exclusive service territory for SEO protection</p>
            <div class="grid">
                <input type="text" id="primaryCity" placeholder="Primary City *">
                <input type="text" id="territoryState" placeholder="State *">
                <input type="text" id="zipCodes" placeholder="ZIP Codes (comma-separated)" style="grid-column: 1 / -1;">
                <input type="text" id="boroughsDistricts" placeholder="Boroughs/Districts (if applicable)" style="grid-column: 1 / -1;">
            </div>
        </div>

        <!-- Contract Terms -->
        <div class="card">
            <h2>Contract Terms</h2>
            <div class="grid">
                <div>
                    <label style="display: block; margin-bottom: 4px; font-weight: 500;">Start Date *</label>
                    <input type="date" id="startDate">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 4px; font-weight: 500;">Contract Type *</label>
                    <select id="contractType">
                        <option value="month-to-month">Month-to-Month</option>
                        <option value="3-months">3-Month Agreement</option>
                        <option value="6-months">6-Month Agreement</option>
                        <option value="12-months">12-Month Agreement</option>
                    </select>
                </div>
                <div id="endDateField" class="hidden">
                    <label style="display: block; margin-bottom: 4px; font-weight: 500;">End Date (auto-calculated)</label>
                    <input type="date" id="endDate" readonly style="background: #f3f4f6;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 4px; font-weight: 500;">Payment Due Day *</label>
                    <select id="paymentDueDay">
                        <option value="1st">1st of the month</option>
                        <option value="15th">15th of the month</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Special Terms -->
        <div class="card">
            <h2>Special Terms & Conditions</h2>
            <textarea id="specialTerms" rows="4" placeholder="Add any special terms, discounts, or custom conditions..."></textarea>
        </div>

        <!-- Pricing Summary -->
        <div class="card pricing-summary">
            <h2>Pricing Summary</h2>
            <div class="pricing-row">
                <span>Monthly Recurring:</span>
                <span id="monthlyTotal" style="color: #2563eb;">$0.00</span>
            </div>
            <div class="pricing-row">
                <span>One-Time Setup/Fees:</span>
                <span id="oneTimeTotal" style="color: #2563eb;">$0.00</span>
            </div>
            <div class="pricing-row pricing-total">
                <span>FIRST PAYMENT DUE:</span>
                <span id="firstPayment" style="color: #1d4ed8;">$0.00</span>
            </div>
        </div>

        <!-- PDF Generation Instructions -->
        <div style="background: #FEF3C7; border: 1px solid #F59E0B; padding: 12px; border-radius: 6px; margin-bottom: 16px;">
            <p style="margin: 0; font-size: 14px; font-weight: 600; color: #92400E;">ðŸ“„ For best PDF results:</p>
            <ul style="margin: 8px 0 0 20px; font-size: 13px; color: #78350F;">
                <li>Select "Save as PDF" as your printer</li>
                <li>UNCHECK "Headers and footers" option</li>
                <li>Set margins to "Default"</li>
            </ul>
        </div>

        <!-- Action Buttons -->
        <button class="btn-pdf" onclick="generatePDF()">GENERATE PDF</button>
        <button class="btn-pdf" onclick="clearForm()" style="background: #6b7280; margin-top: 12px;">CLEAR FORM - START NEW CONTRACT</button>
    </div>

    <!-- Print View -->
    <div class="print-only hidden" id="contractPrint"></div>

    <script>
        // State management
        let formData = {
            clientInfo: {},
            services: {},
            territory: {},
            contractTerms: {},
            specialTerms: ''
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Don't auto-load - start fresh each time
            // loadFromLocalStorage();
            setupEventListeners();
            calculatePricing();
        });

        function setupEventListeners() {
            // Client info
            ['companyName', 'contactName', 'title', 'email', 'phone', 'address', 'city', 'state', 'zip'].forEach(id => {
                document.getElementById(id).addEventListener('input', saveToLocalStorage);
            });

            // Industry change
            document.getElementById('industry').addEventListener('change', function(e) {
                document.getElementById('industryOther').classList.toggle('hidden', e.target.value !== 'Other');
                saveToLocalStorage();
            });

            // Service checkboxes - mutually exclusive groups
            document.querySelectorAll('input[type="checkbox"][data-group]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        const group = this.dataset.group;
                        document.querySelectorAll(`input[type="checkbox"][data-group="${group}"]`).forEach(cb => {
                            if (cb !== this) cb.checked = false;
                        });
                    }
                    handleServiceChange(this.id);
                });
            });

            // Service checkboxes - regular
            document.querySelectorAll('input[type="checkbox"]:not([data-group])').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    handleServiceChange(this.id);
                });
            });

            // Price inputs
            ['websiteDevPrice', 'businessAutomationPrice', 'foundationSetupFee',
             'growthSetupFee', 'enterpriseMonthlyFee', 'enterpriseSetupFee'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.addEventListener('input', () => { calculatePricing(); saveToLocalStorage(); });
            });

            // Contract terms
            document.getElementById('startDate').addEventListener('change', function() {
                calculateEndDate();
                saveToLocalStorage();
            });
            document.getElementById('contractType').addEventListener('change', function() {
                calculateEndDate();
                document.getElementById('endDateField').classList.toggle('hidden', this.value === 'month-to-month');
                saveToLocalStorage();
            });
            document.getElementById('paymentDueDay').addEventListener('change', saveToLocalStorage);

            // Territory
            ['primaryCity', 'territoryState', 'zipCodes', 'boroughsDistricts'].forEach(id => {
                document.getElementById(id).addEventListener('input', saveToLocalStorage);
            });

            // Special terms
            document.getElementById('specialTerms').addEventListener('input', saveToLocalStorage);
        }

        function handleServiceChange(serviceId) {
            const checkbox = document.getElementById(serviceId);

            // Show/hide custom price inputs
            const priceInputMap = {
                'websiteDev': 'websiteDevPrice',
                'businessAutomation': 'businessAutomationPrice',
                'foundationPackage': 'foundationSetupFee',
                'growthPackage': 'growthSetupFee',
                'enterprisePackage': 'enterprisePricing'
            };

            if (priceInputMap[serviceId]) {
                const inputId = priceInputMap[serviceId];
                const inputEl = document.getElementById(inputId);
                if (inputEl) {
                    inputEl.classList.toggle('hidden', !checkbox.checked);
                }
            }

            // Show/hide territory section
            updateTerritoryVisibility();

            calculatePricing();
            saveToLocalStorage();
        }

        function updateTerritoryVisibility() {
            const isSEOSelected = document.getElementById('seoStarter').checked ||
                                  document.getElementById('seoMarketLeader').checked ||
                                  document.getElementById('seoCityDomination').checked ||
                                  document.getElementById('seoRegional').checked;

            document.getElementById('territorySection').classList.toggle('hidden', !isSEOSelected);
        }

        function calculateEndDate() {
            const startDate = document.getElementById('startDate').value;
            const contractType = document.getElementById('contractType').value;

            if (!startDate || contractType === 'month-to-month') return;

            const start = new Date(startDate);
            const months = parseInt(contractType.split('-')[0]);
            start.setMonth(start.getMonth() + months);

            document.getElementById('endDate').value = start.toISOString().split('T')[0];
        }

        function calculatePricing() {
            let monthly = 0;
            let oneTime = 0;

            // SEO services
            if (document.getElementById('seoStarter').checked) monthly += 497;
            if (document.getElementById('seoMarketLeader').checked) monthly += 997;
            if (document.getElementById('seoCityDomination').checked) monthly += 1497;
            if (document.getElementById('seoRegional').checked) monthly += 3500;

            // Web Design & Automation
            if (document.getElementById('websiteDev').checked) {
                oneTime += parseFloat(document.getElementById('websiteDevPrice').value) || 2500;
            }
            if (document.getElementById('marketingAutomation').checked) monthly += 1500;
            if (document.getElementById('businessAutomation').checked) {
                monthly += parseFloat(document.getElementById('businessAutomationPrice').value) || 0;
            }

            // Advanced Packages
            if (document.getElementById('foundationPackage').checked) {
                monthly += 1500;
                oneTime += parseFloat(document.getElementById('foundationSetupFee').value) || 4500;
            }
            if (document.getElementById('growthPackage').checked) {
                monthly += 3000;
                oneTime += parseFloat(document.getElementById('growthSetupFee').value) || 7500;
            }
            if (document.getElementById('enterprisePackage').checked) {
                monthly += parseFloat(document.getElementById('enterpriseMonthlyFee').value) || 6000;
                oneTime += parseFloat(document.getElementById('enterpriseSetupFee').value) || 15000;
            }

            const firstPayment = monthly + oneTime;

            document.getElementById('monthlyTotal').textContent = '$' + monthly.toFixed(2);
            document.getElementById('oneTimeTotal').textContent = '$' + oneTime.toFixed(2);
            document.getElementById('firstPayment').textContent = '$' + firstPayment.toFixed(2);

            return { monthly, oneTime, firstPayment };
        }

        function saveToLocalStorage() {
            const data = {
                companyName: document.getElementById('companyName').value,
                contactName: document.getElementById('contactName').value,
                title: document.getElementById('title').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value,
                city: document.getElementById('city').value,
                state: document.getElementById('state').value,
                zip: document.getElementById('zip').value,
                industry: document.getElementById('industry').value,
                industryOther: document.getElementById('industryOther').value,
                services: {
                    seoStarter: document.getElementById('seoStarter').checked,
                    seoMarketLeader: document.getElementById('seoMarketLeader').checked,
                    seoCityDomination: document.getElementById('seoCityDomination').checked,
                    seoRegional: document.getElementById('seoRegional').checked,
                    websiteDev: document.getElementById('websiteDev').checked,
                    websiteDevPrice: document.getElementById('websiteDevPrice').value,
                    marketingAutomation: document.getElementById('marketingAutomation').checked,
                    businessAutomation: document.getElementById('businessAutomation').checked,
                    businessAutomationPrice: document.getElementById('businessAutomationPrice').value,
                    foundationPackage: document.getElementById('foundationPackage').checked,
                    foundationSetupFee: document.getElementById('foundationSetupFee').value,
                    growthPackage: document.getElementById('growthPackage').checked,
                    growthSetupFee: document.getElementById('growthSetupFee').value,
                    enterprisePackage: document.getElementById('enterprisePackage').checked,
                    enterpriseMonthlyFee: document.getElementById('enterpriseMonthlyFee').value,
                    enterpriseSetupFee: document.getElementById('enterpriseSetupFee').value
                },
                territory: {
                    primaryCity: document.getElementById('primaryCity').value,
                    state: document.getElementById('territoryState').value,
                    zipCodes: document.getElementById('zipCodes').value,
                    boroughsDistricts: document.getElementById('boroughsDistricts').value
                },
                contractTerms: {
                    startDate: document.getElementById('startDate').value,
                    contractType: document.getElementById('contractType').value,
                    endDate: document.getElementById('endDate').value,
                    paymentDueDay: document.getElementById('paymentDueDay').value
                },
                specialTerms: document.getElementById('specialTerms').value
            };
            localStorage.setItem('contractDraft', JSON.stringify(data));
        }

        function loadFromLocalStorage() {
            const saved = localStorage.getItem('contractDraft');
            if (!saved) return;

            try {
                const data = JSON.parse(saved);

                // Load client info
                if (data.companyName) document.getElementById('companyName').value = data.companyName;
                if (data.contactName) document.getElementById('contactName').value = data.contactName;
                if (data.title) document.getElementById('title').value = data.title;
                if (data.email) document.getElementById('email').value = data.email;
                if (data.phone) document.getElementById('phone').value = data.phone;
                if (data.address) document.getElementById('address').value = data.address;
                if (data.city) document.getElementById('city').value = data.city;
                if (data.state) document.getElementById('state').value = data.state;
                if (data.zip) document.getElementById('zip').value = data.zip;
                if (data.industry) {
                    document.getElementById('industry').value = data.industry;
                    document.getElementById('industryOther').classList.toggle('hidden', data.industry !== 'Other');
                }
                if (data.industryOther) document.getElementById('industryOther').value = data.industryOther;

                // Load services
                if (data.services) {
                    Object.keys(data.services).forEach(key => {
                        const el = document.getElementById(key);
                        if (el) {
                            if (el.type === 'checkbox') {
                                el.checked = data.services[key];
                            } else {
                                el.value = data.services[key];
                            }
                        }
                    });
                }

                // Load territory
                if (data.territory) {
                    if (data.territory.primaryCity) document.getElementById('primaryCity').value = data.territory.primaryCity;
                    if (data.territory.state) document.getElementById('territoryState').value = data.territory.state;
                    if (data.territory.zipCodes) document.getElementById('zipCodes').value = data.territory.zipCodes;
                    if (data.territory.boroughsDistricts) document.getElementById('boroughsDistricts').value = data.territory.boroughsDistricts;
                }

                // Load contract terms
                if (data.contractTerms) {
                    if (data.contractTerms.startDate) document.getElementById('startDate').value = data.contractTerms.startDate;
                    if (data.contractTerms.contractType) document.getElementById('contractType').value = data.contractTerms.contractType;
                    if (data.contractTerms.endDate) document.getElementById('endDate').value = data.contractTerms.endDate;
                    if (data.contractTerms.paymentDueDay) document.getElementById('paymentDueDay').value = data.contractTerms.paymentDueDay;
                }

                // Load special terms
                if (data.specialTerms) document.getElementById('specialTerms').value = data.specialTerms;

                updateTerritoryVisibility();
                calculateEndDate();
                calculatePricing();
            } catch (e) {
                console.error('Failed to load draft:', e);
            }
        }

        function clearForm() {
            // Clear all form fields
            document.querySelectorAll('input, select, textarea').forEach(el => {
                if (el.type === 'checkbox') el.checked = false;
                else el.value = '';
            });

            // Reset defaults
            document.getElementById('websiteDevPrice').value = '2500';
            document.getElementById('foundationSetupFee').value = '4500';
            document.getElementById('growthSetupFee').value = '7500';
            document.getElementById('enterpriseMonthlyFee').value = '6000';
            document.getElementById('enterpriseSetupFee').value = '15000';
            document.getElementById('contractType').value = 'month-to-month';
            document.getElementById('paymentDueDay').value = '1st';
            document.getElementById('industry').value = '';

            localStorage.removeItem('contractDraft');
            updateTerritoryVisibility();
            calculatePricing();
        }

        function generatePDF() {
            // Set dynamic filename based on company name
            const companyName = document.getElementById('companyName').value || 'Client';
            const today = new Date().toISOString().split('T')[0];
            document.title = `SeamlessFlow_Agreement_${companyName.replace(/\s+/g, '_')}_${today}`;

            generateContract();
            window.print();
        }

        function formatDate(dateStr) {
            if (!dateStr) return '___________';
            const date = new Date(dateStr);
            return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
        }

        function generateContract() {
            const pricing = calculatePricing();
            const html = buildContractHTML(pricing);
            document.getElementById('contractPrint').innerHTML = html;
        }

        function buildContractHTML(pricing) {
            const isSEOSelected = document.getElementById('seoStarter').checked ||
                                  document.getElementById('seoMarketLeader').checked ||
                                  document.getElementById('seoCityDomination').checked ||
                                  document.getElementById('seoRegional').checked;

            const today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

            return `
                <div class="contract-document">
                    <div class="logo-header">
                        <img src="assets/website homelogo.png" alt="SeamlessFlow.ai">
                    </div>

                    <h1>SERVICE AGREEMENT</h1>

                    <p><strong>Effective Date:</strong> ${formatDate(document.getElementById('startDate').value)}</p>
                    <p style="margin-bottom: 24px;">This Service Agreement ("Agreement") is entered into between:</p>

                    <div class="two-column avoid-break">
                        <div>
                            <p><strong>SERVICE PROVIDER</strong></p>
                            <p>SeamlessFlow.ai</p>
                            <p>info@seamlessflow.ai</p>
                            <p>(347) 749-8146</p>
                        </div>
                        <div>
                            <p><strong>CLIENT</strong></p>
                            <p>${document.getElementById('companyName').value || '___________________________'}</p>
                            <p>${document.getElementById('contactName').value || '___________________________'}, ${document.getElementById('title').value || '_______________'}</p>
                            <p>${document.getElementById('email').value || '___________________________'}</p>
                            <p>${document.getElementById('phone').value || '___________________________'}</p>
                            ${document.getElementById('address').value ? `<p>${document.getElementById('address').value}</p>` : ''}
                            ${document.getElementById('city').value ? `<p>${document.getElementById('city').value}, ${document.getElementById('state').value} ${document.getElementById('zip').value}</p>` : ''}
                            <p>Industry: ${document.getElementById('industry').value === 'Other' ? document.getElementById('industryOther').value : (document.getElementById('industry').value || '_______________')}</p>
                        </div>
                    </div>

                    ${generateServicesSection()}
                    ${isSEOSelected ? generateTerritorySection() : ''}
                    ${generatePricingSection(pricing, isSEOSelected)}
                    ${isSEOSelected ? generateScopeAndLimitations(isSEOSelected) : ''}
                    ${generateClientResponsibilities(isSEOSelected)}
                    ${generateContractTermsSection(isSEOSelected)}
                    ${generateLegalSections(isSEOSelected)}
                    ${generateSignatureSection()}

                    <div class="footer-text">
                        <p>Generated on ${today}</p>
                        <p style="margin-top: 4px;">Questions? Contact us at info@seamlessflow.ai or (347) 749-8146</p>
                    </div>
                </div>
            `;
        }

        function generateServicesSection() {
            let html = '<div class="section"><h2>1. SERVICES AND DELIVERABLES</h2>';

            // SEO Services with detailed deliverables
            if (document.getElementById('seoStarter').checked) {
                html += `
                    <h3>SEO Starter Package ($497/month)</h3>
                    <ul>
                        <li>Google Business Profile full optimization</li>
                        <li>On-page SEO fixes (titles, meta descriptions, H1s on top 5 pages)</li>
                        <li>Local keyword research (10-20 keywords)</li>
                        <li>10-15 directory listings (Yelp, Bing Places, Apple Maps, Facebook, YellowPages, BBB, Nextdoor)</li>
                        <li>NAP consistency audit (Name, Address, Phone check across the web)</li>
                        <li>Google Search Console + Analytics setup</li>
                        <li>Competitor snapshot</li>
                        <li>Monthly ranking + traffic report</li>
                        <li>Email support (24-48 hour response)</li>
                    </ul>
                `;
            }

            if (document.getElementById('seoMarketLeader').checked) {
                html += `
                    <h3>Market Leader Package ($997/month)</h3>
                    <ul>
                        <li>Everything in Starter, plus:</li>
                        <li>25-30 directory listings (core + industry-specific + data aggregators)</li>
                        <li>NAP cleanup (fixing inconsistencies found during audit)</li>
                        <li>1-2 location or service pages per month</li>
                        <li>2-4 Google Business Profile posts per month</li>
                        <li>Review generation system + request templates</li>
                        <li>Competitor monitoring (ongoing)</li>
                        <li>Bi-weekly check-ins (email or call)</li>
                        <li>Detailed monthly report</li>
                        <li>Territory protection (borough/ZIP-level exclusivity â€” we won't work with your direct competitors)</li>
                    </ul>
                `;
            }

            if (document.getElementById('seoCityDomination').checked) {
                html += `
                    <h3>City Domination Package ($1,497/month)</h3>
                    <ul>
                        <li>Everything in Market Leader, plus:</li>
                        <li>40-50+ directory listings (all tiers including niche industry directories)</li>
                        <li>2-4 location or service pages per month</li>
                        <li>1 blog post or local content piece per month</li>
                        <li>4-8 Google Business Profile posts per month</li>
                        <li>Basic link building (1-2 local backlinks per month)</li>
                        <li>Full technical SEO audit + fixes (site speed, schema markup, indexing issues)</li>
                        <li>Geo-grid rank tracking (Local Falcon-style reports showing your rankings across the city)</li>
                        <li>Monthly strategy call (30-45 min)</li>
                        <li>Full city exclusivity (we will not work with competitors in your market)</li>
                    </ul>
                `;
            }

            if (document.getElementById('seoRegional').checked) {
                html += `
                    <h3>Regional Domination Package ($3,500/month)</h3>
                    <ul>
                        <li>Everything in City Domination (scaled across markets)</li>
                        <li>Multi-city keyword research (for each target market)</li>
                        <li>5-10 city landing pages (built during Month 1-2 setup)</li>
                        <li>4-6 new location pages per month (ongoing)</li>
                        <li>2-4 blog posts per month</li>
                        <li>GBP setup and management for multiple locations</li>
                        <li>Regional backlink building (2-4 links per month including local publications)</li>
                        <li>PR support (press releases, local media outreach)</li>
                        <li>App Store Optimization â€” Google Play & Apple App Store (if applicable)</li>
                        <li>Weekly or bi-weekly strategy calls</li>
                        <li>Custom analytics dashboard</li>
                        <li>Full regional exclusivity</li>
                    </ul>
                `;
            }

            // Web & Automation Services
            if (document.getElementById('websiteDev').checked) {
                const price = document.getElementById('websiteDevPrice').value || '2500';
                html += `
                    <h3>Professional Website Development ($${price} one-time)</h3>
                    <ul>
                        <li>Custom responsive website design (mobile-optimized)</li>
                        <li>SEO-friendly site structure and code</li>
                        <li>Contact forms and lead capture integration</li>
                        <li>SSL certificate and security setup</li>
                        <li>Content management system (CMS) integration</li>
                        <li>Up to 10 pages of content</li>
                        <li>Basic on-page SEO optimization</li>
                        <li>Google Analytics and Search Console setup</li>
                        <li>30 days of post-launch support</li>
                    </ul>
                `;
            }

            if (document.getElementById('marketingAutomation').checked) {
                html += `
                    <h3>Marketing Automation Platform ($1,500/month)</h3>
                    <ul>
                        <li>Email marketing automation setup and management</li>
                        <li>CRM integration and data synchronization</li>
                        <li>Lead nurturing workflows and drip campaigns</li>
                        <li>Automated follow-up sequences</li>
                        <li>Customer segmentation and targeting</li>
                        <li>Performance tracking and analytics reporting</li>
                        <li>A/B testing and optimization</li>
                        <li>Monthly campaign strategy and planning</li>
                    </ul>
                `;
            }

            if (document.getElementById('businessAutomation').checked) {
                const price = document.getElementById('businessAutomationPrice').value || '0';
                html += `
                    <h3>Business Operations Automation ($${price}/month)</h3>
                    <ul>
                        <li>Custom workflow automation design and implementation</li>
                        <li>Integration with existing business tools and software</li>
                        <li>Process optimization and efficiency improvements</li>
                        <li>Automated reporting and data collection</li>
                        <li>Staff training on automation tools and systems</li>
                        <li>Ongoing support and workflow adjustments</li>
                        <li>Monthly performance review and optimization</li>
                    </ul>
                `;
            }

            // Advanced Automation Packages
            if (document.getElementById('foundationPackage').checked) {
                const setup = document.getElementById('foundationSetupFee').value || '4500';
                html += `
                    <h3>Foundation Package ($1,500/month + $${setup} setup)</h3>
                    <ul>
                        <li>Core business automation infrastructure setup</li>
                        <li>Email and SMS automation campaigns</li>
                        <li>Basic AI chatbot implementation</li>
                        <li>CRM setup and integration</li>
                        <li>Workflow documentation and training materials</li>
                        <li>Monthly optimization and support</li>
                        <li>2 hours of consulting per month</li>
                    </ul>
                `;
            }

            if (document.getElementById('growthPackage').checked) {
                const setup = document.getElementById('growthSetupFee').value || '7500';
                html += `
                    <h3>Growth Package ($3,000/month + $${setup} setup)</h3>
                    <ul>
                        <li>Everything in Foundation Package, plus:</li>
                        <li>Advanced AI integration (GPT-powered tools and workflows)</li>
                        <li>Multi-channel automation (email, SMS, social media)</li>
                        <li>Custom API integrations and webhooks</li>
                        <li>Advanced analytics and reporting dashboards</li>
                        <li>Dedicated automation specialist</li>
                        <li>Bi-weekly strategy and optimization calls</li>
                        <li>5 hours of consulting per month</li>
                    </ul>
                `;
            }

            if (document.getElementById('enterprisePackage').checked) {
                const monthly = document.getElementById('enterpriseMonthlyFee').value || '6000';
                const setup = document.getElementById('enterpriseSetupFee').value || '15000';
                html += `
                    <h3>Enterprise Package ($${monthly}/month + $${setup} setup)</h3>
                    <ul>
                        <li>Everything in Growth Package, plus:</li>
                        <li>Enterprise-grade automation architecture</li>
                        <li>Custom AI model training and deployment</li>
                        <li>Full-scale digital transformation consulting</li>
                        <li>Unlimited workflow and integration development</li>
                        <li>24/7 priority support with dedicated team</li>
                        <li>White-glove onboarding and implementation</li>
                        <li>Quarterly business review and strategic planning</li>
                        <li>Unlimited consulting hours</li>
                    </ul>
                `;
            }

            html += '</div>';
            return html;
        }

        function generateTerritorySection() {
            // Determine exclusivity level based on tier
            let exclusivityLevel = '';
            if (document.getElementById('seoStarter').checked) {
                exclusivityLevel = 'No Territory Exclusivity (Starter tier)';
            } else if (document.getElementById('seoMarketLeader').checked) {
                exclusivityLevel = 'Borough/ZIP-Level Exclusivity (we won\'t work with your direct competitors in this territory)';
            } else if (document.getElementById('seoCityDomination').checked) {
                exclusivityLevel = 'Full City Exclusivity (ONE client per industry per city)';
            } else if (document.getElementById('seoRegional').checked) {
                exclusivityLevel = 'Full Regional Exclusivity (ONE client per industry across all target markets)';
            }

            const isCityDomination = document.getElementById('seoCityDomination').checked || document.getElementById('seoRegional').checked;

            return `
                <div class="section">
                    <h2>2. TERRITORY PROTECTION POLICY</h2>

                    <h3>2.1 Protected Territory</h3>
                    <p><strong>Primary City:</strong> ${document.getElementById('primaryCity').value || '___________________________'}</p>
                    <p><strong>State:</strong> ${document.getElementById('territoryState').value || '___________________________'}</p>
                    <p><strong>ZIP Codes:</strong> ${document.getElementById('zipCodes').value || '___________________________'}</p>
                    ${document.getElementById('boroughsDistricts').value ? `<p><strong>Boroughs/Districts:</strong> ${document.getElementById('boroughsDistricts').value}</p>` : ''}

                    <h3>2.2 Exclusivity Level</h3>
                    <p><strong>${exclusivityLevel}</strong></p>

                    ${isCityDomination ? `
                        <h3>2.3 First Right of Refusal (City Domination & Regional Only)</h3>
                        <p>If a prospective client offers a higher rate for Client's protected territory, Service Provider will notify Client in writing and provide 7 business days to match or exceed the offer to maintain exclusivity. If Client declines to match the offer, territory boundaries may be adjusted or exclusivity may end after 30 days written notice.</p>
                    ` : ''}

                    <h3>${isCityDomination ? '2.4' : '2.3'} Territory Modification and Expansion</h3>
                    <ul>
                        <li>Additional territories may be added at additional cost and may require a higher service tier</li>
                        <li>Territory boundaries may be adjusted by mutual written agreement</li>
                        <li>Client may request expansion into adjacent territories at prevailing rates</li>
                    </ul>

                    <h3>${isCityDomination ? '2.5' : '2.4'} Industry Limitation</h3>
                    <p>Exclusivity applies only to Client's specific industry (${document.getElementById('industry').value === 'Other' ? document.getElementById('industryOther').value : document.getElementById('industry').value}). Service Provider may accept clients in different industries within the same territory without restriction.</p>

                    <h3>${isCityDomination ? '2.6' : '2.5'} Protection Terms</h3>
                    <ul>
                        <li>Territory protection begins upon contract signing and receipt of first payment</li>
                        <li>Territory exclusivity is maintained as long as the agreement remains in good standing</li>
                        <li>If Client cancels services, territory protection ends 30 days after final payment</li>
                        <li>Territory protection applies only to new clients acquired after this agreement date</li>
                    </ul>
                </div>
            `;
        }

        function generatePricingSection(pricing, isSEO) {
            const sectionNum = isSEO ? '3' : '2';
            const paymentDay = document.getElementById('paymentDueDay').value;

            return `
                <div class="section">
                    <h2>${sectionNum}. PRICING AND PAYMENT TERMS</h2>

                    <h3>${sectionNum}.1 Service Pricing</h3>
                    <p>Monthly Recurring Services: <strong>$${pricing.monthly.toFixed(2)}</strong></p>
                    <p>One-Time Setup/Development Fees: <strong>$${pricing.oneTime.toFixed(2)}</strong></p>
                    <p style="font-size: 13pt; font-weight: bold; margin-top: 12px; color: #2563eb;">FIRST PAYMENT DUE: $${pricing.firstPayment.toFixed(2)}</p>
                    <p style="color: #6B7280; margin-top: 4px;">Subsequent Monthly Payments: $${pricing.monthly.toFixed(2)}</p>

                    <h3>${sectionNum}.2 Payment Terms</h3>
                    <ul>
                        <li>First payment ${pricing.oneTime > 0 ? '(monthly service + setup fees) ' : ''}is due upon contract signing</li>
                        <li>Subsequent payments are due on the ${paymentDay} of each month</li>
                        <li>Payments can be made via Zelle, PayPal, or Apple Pay</li>
                        <li>A $50 late fee will be applied to payments received more than 5 days past the due date</li>
                        <li>Services may be suspended if payment is more than 15 days overdue</li>
                        <li>All fees are non-refundable once work has commenced</li>
                    </ul>

                    <h3>${sectionNum}.3 Performance Guarantee</h3>
                    <p>Service Provider guarantees measurable progress within the first 60 days of service, provided:</p>
                    <ul>
                        <li>Client provides timely access to all required accounts and information</li>
                        <li>Client responds to requests within specified timeframes</li>
                        <li>Client does not violate search engine guidelines</li>
                        <li>Client maintains active business operations</li>
                    </ul>

                    <p style="margin-top: 8px;">Measurable progress includes but is not limited to:</p>
                    <ul>
                        <li>Improvement in Google Business Profile metrics (views, calls, direction requests)</li>
                        <li>Increase in local search visibility</li>
                        <li>Growth in citation presence across directories</li>
                        <li>Improvement in on-page SEO factors</li>
                    </ul>

                    <p style="margin-top: 8px;">If NO measurable progress is demonstrated after 60 days AND Service Provider has fulfilled all deliverables, Client may request a performance review. Upon mutual agreement that progress has not occurred due to Service Provider's failure to deliver, Client may be eligible for:</p>
                    <ul>
                        <li>50% refund of the most recent month's payment, OR</li>
                        <li>One additional month of service at no charge</li>
                    </ul>

                    <p style="margin-top: 8px;">This guarantee is void if:</p>
                    <ul>
                        <li>Client fails to provide required access or information</li>
                        <li>Client engages in practices that violate search engine guidelines</li>
                        <li>Client hires competing SEO services during the agreement period</li>
                        <li>Progress is negatively impacted by third-party factors (algorithm updates, competitor actions, etc.)</li>
                    </ul>
                </div>
            `;
        }

        function generateScopeAndLimitations(isSEO) {
            const sectionNum = isSEO ? '4' : '3';
            return `
                <div class="section">
                    <h2>${sectionNum}. SERVICE SCOPE AND LIMITATIONS</h2>

                    <h3>${sectionNum}.1 SEO Results and Timeline</h3>
                    <ul>
                        <li>SeamlessFlow.ai does not guarantee specific search engine rankings or traffic volumes</li>
                        <li>Rankings are determined by third-party algorithms (Google, Bing, etc.) outside our control</li>
                        <li>Results from SEO services typically take 3-6 months to materialize</li>
                        <li>Client acknowledges this timeline and agrees not to terminate solely due to lack of immediate results within the first 90 days</li>
                    </ul>

                    <h3>${sectionNum}.2 Service Provider Limitations</h3>
                    <ul>
                        <li>Service Provider is not liable for ranking changes due to algorithm updates</li>
                        <li>Service Provider is not responsible for competitor actions or market conditions</li>
                        <li>Service Provider is not liable for changes to Client's website not made by Service Provider</li>
                        <li>Service Provider cannot guarantee specific lead volume or conversion rates</li>
                        <li>Service Provider is not responsible for third-party platform changes or outages</li>
                    </ul>

                    <h3>${sectionNum}.3 Performance Reporting</h3>
                    <ul>
                        <li>Monthly performance reports will be provided via email</li>
                        <li>Reports include key metrics: website traffic, rankings, leads, and conversion data</li>
                        <li>Strategy calls are available per tier specifications</li>
                    </ul>
                </div>
            `;
        }

        function generateClientResponsibilities(isSEO) {
            const sectionNum = isSEO ? '5' : '4';
            return `
                <div class="section">
                    <h2>${sectionNum}. CLIENT RESPONSIBILITIES</h2>

                    <p>Client agrees to:</p>
                    <ul>
                        <li>Provide access to Google Business Profile within 5 business days of request</li>
                        <li>Respond to information requests within 5 business days</li>
                        <li>Not engage in practices that violate Google's or other search engine guidelines</li>
                        <li>Notify Service Provider of any changes to business name, address, phone, or service areas</li>
                        <li>Maintain ownership and control of their Google Business Profile</li>
                        <li>Not hire competing SEO services for the same protected territory during this agreement</li>
                        <li>Provide timely access to website, hosting, and necessary business accounts</li>
                        <li>Review and approve deliverables within 7 business days of submission</li>
                        <li>Maintain active business operations and comply with all applicable laws</li>
                        <li>Provide feedback and communicate concerns promptly</li>
                    </ul>

                    <h3>${sectionNum}.1 Client Content and Information</h3>
                    <p>Client is responsible for the accuracy of all information provided, including business details, service descriptions, and marketing content. Service Provider will not be held liable for errors in Client-provided information.</p>
                </div>
            `;
        }

        function generateContractTermsSection(isSEO) {
            const sectionNum = isSEO ? '6' : '5';
            const contractType = document.getElementById('contractType').value;
            const endDate = document.getElementById('endDate').value;

            let termText = '';
            if (contractType === 'month-to-month') {
                termText = '<li>This agreement continues on a month-to-month basis until terminated by either party</li><li>Either party may terminate with 30 days written notice</li><li>No early termination penalty applies</li>';
            } else {
                const months = contractType.split('-')[0];
                termText = `<li>This agreement is for a fixed term of ${months} months ending ${formatDate(endDate)}</li><li>Agreement automatically renews for the same term unless either party provides 30 days written notice before expiration</li><li>Early termination requires 30 days notice and payment of 50% of remaining months</li>`;
            }

            return `
                <div class="section">
                    <h2>${sectionNum}. CONTRACT TERM AND TERMINATION</h2>

                    <h3>${sectionNum}.1 Term</h3>
                    <p><strong>${contractType === 'month-to-month' ? 'Month-to-Month Agreement' : contractType.split('-')[0] + '-Month Agreement'}</strong></p>
                    <ul>${termText}</ul>

                    <h3>${sectionNum}.2 Termination by Client</h3>
                    <ul>
                        <li>Client may terminate with 30 days written notice</li>
                        <li>All setup fees and one-time charges are non-refundable</li>
                        <li>For fixed-term agreements: 50% of remaining monthly fees must be paid upon early termination</li>
                        <li>Territory protection ends 30 days after final payment</li>
                    </ul>

                    <h3>${sectionNum}.3 Termination by Service Provider</h3>
                    <ul>
                        <li>Service Provider may terminate immediately if payment is more than 30 days overdue</li>
                        <li>Service Provider may terminate with 30 days notice if Client fails to meet responsibilities outlined in this agreement</li>
                        <li>Upon termination, Client will receive all completed work and final reports</li>
                    </ul>
                </div>
            `;
        }

        function generateLegalSections(isSEO) {
            const baseNum = isSEO ? 7 : 6;
            const specialTerms = document.getElementById('specialTerms').value;

            return `
                ${specialTerms ? `<div class="section"><h2>${baseNum}. SPECIAL TERMS AND CONDITIONS</h2><p style="white-space: pre-wrap;">${specialTerms}</p></div>` : ''}

                <div class="section">
                    <h2>${specialTerms ? baseNum + 1 : baseNum}. INTELLECTUAL PROPERTY</h2>
                    <ul>
                        <li>Upon full payment, Client owns all custom-developed content, graphics, and creative materials</li>
                        <li>Service Provider retains ownership of proprietary tools, software, methodologies, and templates</li>
                        <li>Service Provider may use Client's logo and business name in portfolio and marketing materials unless Client objects in writing</li>
                        <li>Third-party software licenses (e.g., plugins, themes) remain property of their respective owners</li>
                    </ul>
                </div>

                <div class="section">
                    <h2>${specialTerms ? baseNum + 2 : baseNum + 1}. CONFIDENTIALITY</h2>
                    <ul>
                        <li>Both parties agree to keep confidential information private and not disclose it to third parties</li>
                        <li>Confidential information includes business strategies, customer data, pricing, and proprietary methods</li>
                        <li>This obligation survives termination of this agreement</li>
                    </ul>
                </div>

                <div class="section">
                    <h2>${specialTerms ? baseNum + 3 : baseNum + 2}. LIMITATION OF LIABILITY</h2>
                    <ul>
                        <li>Service Provider's total liability under this agreement shall not exceed the total amount paid by Client in the preceding 3 months</li>
                        <li>Service Provider is not liable for indirect, incidental, or consequential damages</li>
                        <li>Service Provider is not responsible for changes to search engine algorithms, social media policies, or third-party platform terms</li>
                        <li>Client acknowledges that digital marketing results cannot be guaranteed and may vary based on numerous factors beyond Service Provider's control</li>
                    </ul>
                </div>

                <div class="section">
                    <h2>${specialTerms ? baseNum + 4 : baseNum + 3}. GENERAL PROVISIONS</h2>
                    <ul>
                        <li><strong>Entire Agreement:</strong> This agreement constitutes the entire understanding between the parties and supersedes all prior discussions and agreements</li>
                        <li><strong>Amendments:</strong> Any changes to this agreement must be made in writing and signed by both parties</li>
                        <li><strong>Governing Law:</strong> This agreement shall be governed by the laws of the State of New York</li>
                        <li><strong>Severability:</strong> If any provision is found unenforceable, the remaining provisions remain in full effect</li>
                        <li><strong>Assignment:</strong> Neither party may assign this agreement without written consent from the other party</li>
                        <li><strong>Force Majeure:</strong> Neither party shall be liable for delays or failures in performance due to circumstances beyond their reasonable control</li>
                    </ul>
                </div>
            `;
        }

        function generateSignatureSection() {
            const companyName = document.getElementById('companyName').value || '___________________________';

            return `
                <div class="page-break" style="margin-top: 48px;">
                    <h2>AGREEMENT SIGNATURE</h2>
                    <p style="margin-bottom: 32px;">By signing below, both parties acknowledge that they have read, understood, and agree to be bound by all terms and conditions of this Agreement.</p>

                    <div class="signature-grid">
                        <div class="signature-block">
                            <p style="font-weight: bold; margin-bottom: 24px;">SERVICE PROVIDER:</p>
                            <p style="margin-bottom: 8px;">SeamlessFlow.ai</p>
                            <div class="signature-line"></div>
                            <p style="font-size: 12px;">Authorized Signature</p>
                            <div class="signature-line"></div>
                            <p style="font-size: 12px;">Printed Name and Title</p>
                            <div class="signature-line"></div>
                            <p style="font-size: 12px;">Date</p>
                        </div>

                        <div class="signature-block">
                            <p style="font-weight: bold; margin-bottom: 24px;">CLIENT:</p>
                            <p style="margin-bottom: 8px;">${companyName}</p>
                            <div class="signature-line"></div>
                            <p style="font-size: 12px;">Authorized Signature</p>
                            <div class="signature-line"></div>
                            <p style="font-size: 12px;">Printed Name and Title</p>
                            <div class="signature-line"></div>
                            <p style="font-size: 12px;">Date</p>
                        </div>
                    </div>

                    <p style="margin-top: 48px; text-align: center; color: #6B7280; font-size: 10pt;">Please sign and return this agreement to: info@seamlessflow.ai | (347) 749-8146</p>
                </div>
            `;
        }
    </script>
</body>
</html>
